(self.webpackChunk_plone_volto=self.webpackChunk_plone_volto||[]).push([[8876],{"./src/actions/rules/rules.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{K2:function(){return getAction},Mv:function(){return getControlPanelRule},OO:function(){return addNewRule},Oi:function(){return removeCondition},Om:function(){return applyRulesToSubfolders},Os:function(){return getControlPanelRules},Q5:function(){return removeAction},QB:function(){return enableRules},QG:function(){return moveRuleCondition},S_:function(){return deleteControlPanelRule},Up:function(){return getCondition},VP:function(){return addRule},YL:function(){return moveRuleAction},_:function(){return getContentRulesEvents},aW:function(){return removeRules},gB:function(){return editAction},gV:function(){return disableRules},gz:function(){return getRules},m4:function(){return unapplyRulesToSubfolders},m_:function(){return editCondition},oh:function(){return addCondition},oz:function(){return editRule},pw:function(){return addAction}});var _home_runner_work_volto_bookmarks_volto_bookmarks_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/constants/ActionTypes.js");function getRules(url){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.Ib,request:{op:"get",path:`${url}/@content-rules`}}}function getControlPanelRules(url){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.cl,request:{op:"get",path:`${url}/@controlpanels/content-rules`}}}function getControlPanelRule(url,rule){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.M7,request:{op:"get",path:`${url}/@controlpanels/content-rules/${rule}`}}}function enableRules(url,rules){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.SE,request:{op:"patch",path:`${url}/@content-rules`,data:{"form.button.Enable":!0,rule_ids:rules}}}}function disableRules(url,rules){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.uE,request:{op:"patch",path:`${url}/@content-rules`,data:{"form.button.Disable":!0,rule_ids:rules}}}}function applyRulesToSubfolders(url,rules){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.Q9,request:{op:"patch",path:`${url}/@content-rules`,data:{"form.button.Bubble":!0,rule_ids:rules}}}}function unapplyRulesToSubfolders(url,rules){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.gZ,request:{op:"patch",path:`${url}/@content-rules`,data:{"form.button.NoBubble":!0,rule_ids:rules}}}}function removeRules(url,rules){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.u_,request:{op:"del",path:`${url}/@content-rules`,data:{"form.button.Delete":!0,rule_ids:rules}}}}function addRule(url,rule){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.$Y,request:{op:"post",path:`${url}/@content-rules/${rule}`}}}function deleteControlPanelRule(url,rule){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.Ih,request:{op:"del",path:`${url}/@controlpanels/content-rules/${rule}`}}}function getContentRulesEvents(url){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.oh,request:{op:"get",path:`${url}/@vocabularies/plone.contentrules.events`}}}function addNewRule(url,data){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.iy,request:{op:"post",path:`${url}/@controlpanels/content-rules`,data:data}}}function moveRuleCondition(url,data,ruleId,condId){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.gz,request:{op:"patch",path:`${url}/@controlpanels/content-rules/${ruleId}/condition/${condId}`,data:data}}}function moveRuleAction(url,data,ruleId,actionId){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.gz,request:{op:"patch",path:`${url}/@controlpanels/content-rules/${ruleId}/action/${actionId}`,data:data}}}function editRule(url,data,rule){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.sV,request:{op:"patch",path:`${url}/@controlpanels/content-rules/${rule}`,data:(0,_home_runner_work_volto_bookmarks_volto_bookmarks_node_modules_pnpm_babel_runtime_7_20_6_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.c)({"form.button.Save":!0},data)}}}function removeCondition(url,rule,condition){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.k$,request:{op:"del",path:`${url}/@controlpanels/content-rules/${rule}/condition/${condition}`}}}function addCondition(url,rule,data){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.wP,request:{op:"post",path:`${url}/@controlpanels/content-rules/${rule}/condition`,data:data}}}function editCondition(url,rule,data,condition_index){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.i2,request:{op:"patch",path:`${url}/@controlpanels/content-rules/${rule}/condition/${condition_index}`,data:data}}}function getCondition(url,rule,condition_index){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.dz,request:{op:"get",path:`${url}/@controlpanels/content-rules/${rule}/condition/${condition_index}`}}}function removeAction(url,rule,action){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.cB,request:{op:"del",path:`${url}/@controlpanels/content-rules/${rule}/action/${action}`}}}function addAction(url,rule,data){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.ee,request:{op:"post",path:`${url}/@controlpanels/content-rules/${rule}/action`,data:data}}}function editAction(url,rule,data,action_index){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.U5,request:{op:"patch",path:`${url}/@controlpanels/content-rules/${rule}/action/${action_index}`,data:data}}}function getAction(url,rule,action_index){return{type:_plone_volto_constants_ActionTypes__WEBPACK_IMPORTED_MODULE_0__.CC,request:{op:"get",path:`${url}/@controlpanels/content-rules/${rule}/action/${action_index}`}}}},"./src/components/manage/Controlpanels/Rules/AddRule.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/react-redux@8.1.2_@types+react-dom@18.2.12_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0__react@18.2.0_redux@4.2.1/node_modules/react-redux/es/index.js"),redux__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../../node_modules/.pnpm/redux@4.2.1/node_modules/redux/es/redux.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../../node_modules/.pnpm/react-router-dom@5.2.0_react@18.2.0/node_modules/react-router-dom/esm/react-router-dom.js"),_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/Url/Url.js"),_plone_volto_helpers_Helmet_Helmet__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/helpers/Helmet/Helmet.jsx"),react_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../../node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/index.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Container/Container.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/collections/Form/Form.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/collections/Grid/Grid.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/modules/Checkbox/Checkbox.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Button/Button.js"),react_intl__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/index.js"),react_intl__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/components/message.js"),react_intl__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/components/injectIntl.js"),_plone_volto_components_theme_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/theme/Icon/Icon.jsx"),_plone_volto_components_manage_Toolbar_Toolbar__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/manage/Toolbar/Toolbar.jsx"),_plone_volto_components_manage_Toast_Toast__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/manage/Toast/Toast.jsx"),_plone_volto_components_manage_Form__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/manage/Form/index.tsx"),react_toastify__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../../node_modules/.pnpm/react-toastify@5.5.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/react-toastify/esm/react-toastify.js"),_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/actions/rules/rules.js"),_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/icons/back.svg"),_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_9__),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;const messages=(0,react_intl__WEBPACK_IMPORTED_MODULE_10__.defineMessages)({back:{id:"Back",defaultMessage:"Back"},addRule:{id:"Add Content Rule",defaultMessage:"Add Content Rule"},success:{id:"Success",defaultMessage:"Success"},add:{id:"Rule added",defaultMessage:"Rule added"}});class AddRule extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state={isClient:!1,title:"",description:"",event:"",cascading:!1,stop:!1,enabled:!1,invalidForm:!0,invalidTitle:!1,invalidEvent:!1}}componentDidMount(){this.setState({isClient:!0}),this.props.getContentRulesEvents((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.U$)(this.props.pathname))}componentDidUpdate(prevProps,prevState){prevState.title===this.state.title&&prevState.event===this.state.event||(this.state.title&&this.state.event?this.setState({invalidForm:!1,invalidTitle:!1,invalidEvent:!1}):(this.state.title||this.setState({invalidForm:!0,invalidTitle:!0}),this.state.event||this.setState({invalidForm:!0,invalidEvent:!0})))}UNSAFE_componentWillReceiveProps(nextProps){this.props.rules.add.loading&&nextProps.rules.add.loaded&&(react_toastify__WEBPACK_IMPORTED_MODULE_11__.toast.success(__jsx(_plone_volto_components_manage_Toast_Toast__WEBPACK_IMPORTED_MODULE_7__.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.add)})),this.props.history.push((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.yn)(this.props.pathname)))}onCancel(){this.props.history.push((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.yn)(this.props.pathname))}handleAdd(){const{title:title,description:description,event:event,cascading:cascading,stop:stop,enabled:enabled,invalidForm:invalidForm}=this.state,data={title:title,description:description,event:event,cascading:cascading,enabled:enabled,stop:stop};invalidForm||this.props.addNewRule((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.U$)(this.props.pathname),data)}render(){var _this$props$events,_this$props$events2,_this$props$events3;const{title:title,description:description,event:event,cascading:cascading,stop:stop,enabled:enabled}=this.state,triggeringEvents=null!==(_this$props$events=this.props.events)&&void 0!==_this$props$events&&_this$props$events.items&&(null===(_this$props$events2=this.props.events)||void 0===_this$props$events2?void 0:_this$props$events2.items.length)>0?null===(_this$props$events3=this.props.events)||void 0===_this$props$events3?void 0:_this$props$events3.items.map((event=>[event.token,event.title])):"";return __jsx("div",{id:"page-rule-add"},__jsx(_plone_volto_helpers_Helmet_Helmet__WEBPACK_IMPORTED_MODULE_3__.c,{title:this.props.intl.formatMessage(messages.addRule)}),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_12__.c,null,__jsx("article",{id:"content"},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c.Group,{raised:!0},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,{className:"primary"},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Add Rule",defaultMessage:"Add Rule"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,{className:"secondary"},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Use the form below to define the new content rule",defaultMessage:"Use the form below to define the new content rule"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_15__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Row,{stretched:!0},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Column,null,__jsx(_plone_volto_components_manage_Form__WEBPACK_IMPORTED_MODULE_8__.IN,{className:"title-field",title:"Title",description:"Please set a descriptive title for the rule.",value:title,required:!0,onChange:(e,t)=>this.setState({title:t})}))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Row,{stretched:!0},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Column,null,__jsx(_plone_volto_components_manage_Form__WEBPACK_IMPORTED_MODULE_8__.IN,{title:"Description",description:"Enter a short description of the rule and its purpose.",value:description,onChange:(e,d)=>this.setState({description:d})}))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Row,{stretched:!0},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Column,null,__jsx(_plone_volto_components_manage_Form__WEBPACK_IMPORTED_MODULE_8__.IN,{required:!0,title:"Triggering event",description:"The rule will execute when the following event occurs.",choices:triggeringEvents,value:event,onChange:(e,v)=>this.setState({event:v})})))))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx("div",{style:{display:"flex",flexDirection:"column"}},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c,{onChange:(e,{checked:checked})=>this.setState({enabled:checked}),label:"Enabled",checked:enabled}),__jsx("p",{style:{color:"#878f93",paddingTop:"0.7rem",paddingBottom:"0.7rem",fontSize:"0.9rem"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Whether or not the rule is currently enabled",defaultMessage:"Whether or not the rule is currently enabled"})))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx("div",{style:{display:"flex",flexDirection:"column"}},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c,{onChange:(e,{checked:checked})=>this.setState({stop:checked}),label:"Stop Executing rules",checked:stop}),__jsx("p",{style:{color:"#878f93",paddingTop:"0.7rem",paddingBottom:"0.7rem",fontSize:"0.9rem"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Whether or not execution of further rules should stop after this rule is executed",defaultMessage:"Whether or not execution of further rules should stop after this rule is executed"})))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx("div",{style:{display:"flex",flexDirection:"column"}},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c,{onChange:(e,{checked:checked})=>this.setState({cascading:checked}),label:"Cascading rule",checked:cascading}),__jsx("p",{style:{color:"#878f93",paddingTop:"0.7rem",paddingBottom:"0.7rem",fontSize:"0.9rem"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Whether or not other rules should be triggered by the actions launched by this rule. Activate this only if you are sure this won't create infinite loops",defaultMessage:"Whether or not other rules should be triggered by the actions launched by this rule. Activate this only if you are sure this won't create infinite loops"})))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__.c,{onClick:()=>this.handleAdd(),primary:!0},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Save",defaultMessage:"Save"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__.c,{onClick:()=>this.onCancel(),secondary:!0},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Cancel",defaultMessage:"Cancel"}))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,this.state.invalidTitle&&__jsx("p",{style:{color:"red"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Title field error. Value not provided or already existing.",defaultMessage:"Title field error. Value not provided or already existing."})),this.state.invalidEvent&&__jsx("p",{style:{color:"red"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Triggering event field error. Please select a value",defaultMessage:"Triggering event field error. Please select a value"})))))),this.state.isClient&&(0,react_dom__WEBPACK_IMPORTED_MODULE_4__.createPortal)(__jsx(_plone_volto_components_manage_Toolbar_Toolbar__WEBPACK_IMPORTED_MODULE_6__.c,{pathname:this.props.pathname,hideDefaultViewButtons:!0,inner:__jsx(react_router_dom__WEBPACK_IMPORTED_MODULE_19__.cH,{className:"item",to:"#",onClick:()=>this.onCancel()},__jsx(_plone_volto_components_theme_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__.c,{name:_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_9___default(),className:"contents circled",size:"30px",title:this.props.intl.formatMessage(messages.back)}))}),document.getElementById("toolbar")))}}__webpack_exports__.default=(0,redux__WEBPACK_IMPORTED_MODULE_20__.compose)(react_intl__WEBPACK_IMPORTED_MODULE_21__.cp,(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.connect)(((state,props)=>({rules:state.controlpanelrules,events:state.contentrulesevents,pathname:props.location.pathname})),{getContentRulesEvents:_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__._,addNewRule:_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__.OO}))(AddRule),AddRule.__docgenInfo={description:"AddRule class.\n@class AddRule\n@extends Component",methods:[{name:"onCancel",docblock:"Back/Cancel handler\n@method onCancel\n@returns {undefined}",modifiers:[],params:[],returns:{},description:"Back/Cancel handler"},{name:"handleAdd",docblock:"Add rule handler\n@method handleAdd\n@returns {undefined}",modifiers:[],params:[],returns:{},description:"Add rule handler"}],displayName:"AddRule",props:{getContentRulesEvents:{description:"",type:{name:"func"},required:!0},addNewRule:{description:"",type:{name:"func"},required:!0}}}},"./src/components/manage/Controlpanels/Rules/ConfigureRule.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:function(){return Rules_ConfigureRule}});var react=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),es=__webpack_require__("../../../node_modules/.pnpm/react-redux@8.1.2_@types+react-dom@18.2.12_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0__react@18.2.0_redux@4.2.1/node_modules/react-redux/es/index.js"),redux=__webpack_require__("../../../node_modules/.pnpm/redux@4.2.1/node_modules/redux/es/redux.js"),react_router_dom=__webpack_require__("../../../node_modules/.pnpm/react-router-dom@5.2.0_react@18.2.0/node_modules/react-router-dom/esm/react-router-dom.js"),Url=__webpack_require__("./src/helpers/Url/Url.js"),Helmet=__webpack_require__("./src/helpers/Helmet/Helmet.jsx"),react_dom=__webpack_require__("../../../node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/index.js"),Container=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Container/Container.js"),Segment=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js"),Grid=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/collections/Grid/Grid.js"),esm_extends=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/extends.js"),inheritsLoose=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/inheritsLoose.js"),clsx_m=__webpack_require__("../../../node_modules/.pnpm/clsx@1.2.1/node_modules/clsx/dist/clsx.m.js"),classNameBuilders=(__webpack_require__("../../../node_modules/.pnpm/prop-types@15.7.2/node_modules/prop-types/index.js"),__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/lib/classNameBuilders.js")),getUnhandledProps=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/lib/getUnhandledProps.js"),getElementType=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/lib/getElementType.js"),childrenUtils=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/lib/childrenUtils.js"),Image=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Image/Image.js"),factories=(__webpack_require__("../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/without.js"),__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/lib/factories.js"));function CardDescription(props){var children=props.children,className=props.className,content=props.content,textAlign=props.textAlign,classes=(0,clsx_m.c)((0,classNameBuilders.iE)(textAlign),"description",className),rest=(0,getUnhandledProps.c)(CardDescription,props),ElementType=(0,getElementType.c)(CardDescription,props);return react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes}),childrenUtils.Ar(children)?content:children)}CardDescription.handledProps=["as","children","className","content","textAlign"],CardDescription.propTypes={};var Card_CardDescription=CardDescription;function CardHeader(props){var children=props.children,className=props.className,content=props.content,textAlign=props.textAlign,classes=(0,clsx_m.c)((0,classNameBuilders.iE)(textAlign),"header",className),rest=(0,getUnhandledProps.c)(CardHeader,props),ElementType=(0,getElementType.c)(CardHeader,props);return react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes}),childrenUtils.Ar(children)?content:children)}CardHeader.handledProps=["as","children","className","content","textAlign"],CardHeader.propTypes={};var Card_CardHeader=CardHeader;function CardMeta(props){var children=props.children,className=props.className,content=props.content,textAlign=props.textAlign,classes=(0,clsx_m.c)((0,classNameBuilders.iE)(textAlign),"meta",className),rest=(0,getUnhandledProps.c)(CardMeta,props),ElementType=(0,getElementType.c)(CardMeta,props);return react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes}),childrenUtils.Ar(children)?content:children)}CardMeta.handledProps=["as","children","className","content","textAlign"],CardMeta.propTypes={};var Card_CardMeta=CardMeta;function CardContent(props){var children=props.children,className=props.className,content=props.content,description=props.description,extra=props.extra,header=props.header,meta=props.meta,textAlign=props.textAlign,classes=(0,clsx_m.c)((0,classNameBuilders.gj)(extra,"extra"),(0,classNameBuilders.iE)(textAlign),"content",className),rest=(0,getUnhandledProps.c)(CardContent,props),ElementType=(0,getElementType.c)(CardContent,props);return childrenUtils.Ar(children)?childrenUtils.Ar(content)?react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes}),(0,factories.OS)(Card_CardHeader,(function(val){return{content:val}}),header,{autoGenerateKey:!1}),(0,factories.OS)(Card_CardMeta,(function(val){return{content:val}}),meta,{autoGenerateKey:!1}),(0,factories.OS)(Card_CardDescription,(function(val){return{content:val}}),description,{autoGenerateKey:!1})):react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes}),content):react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes}),children)}CardContent.handledProps=["as","children","className","content","description","extra","header","meta","textAlign"],CardContent.propTypes={};var Card_CardContent=CardContent,map=__webpack_require__("../../../node_modules/.pnpm/lodash@4.17.21/node_modules/lodash/map.js"),map_default=__webpack_require__.n(map);function CardGroup(props){var centered=props.centered,children=props.children,className=props.className,content=props.content,doubling=props.doubling,items=props.items,itemsPerRow=props.itemsPerRow,stackable=props.stackable,textAlign=props.textAlign,classes=(0,clsx_m.c)("ui",(0,classNameBuilders.gj)(centered,"centered"),(0,classNameBuilders.gj)(doubling,"doubling"),(0,classNameBuilders.gj)(stackable,"stackable"),(0,classNameBuilders.iE)(textAlign),(0,classNameBuilders.kl)(itemsPerRow),"cards",className),rest=(0,getUnhandledProps.c)(CardGroup,props),ElementType=(0,getElementType.c)(CardGroup,props);if(!childrenUtils.Ar(children))return react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes}),children);if(!childrenUtils.Ar(content))return react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes}),content);var itemsJSX=map_default()(items,(function(item){var _item$key,key=null!=(_item$key=item.key)?_item$key:[item.header,item.description].join("-");return react.createElement(Card,(0,esm_extends.c)({key:key},item))}));return react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes}),itemsJSX)}CardGroup.handledProps=["as","centered","children","className","content","doubling","items","itemsPerRow","stackable","textAlign"],CardGroup.propTypes={};var Card_CardGroup=CardGroup,Card=function(_Component){function Card(){for(var _this,_len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_Component.call.apply(_Component,[this].concat(args))||this).handleClick=function(e){var onClick=_this.props.onClick;onClick&&onClick(e,_this.props)},_this}return(0,inheritsLoose.c)(Card,_Component),Card.prototype.render=function render(){var _this$props=this.props,centered=_this$props.centered,children=_this$props.children,className=_this$props.className,color=_this$props.color,content=_this$props.content,description=_this$props.description,extra=_this$props.extra,fluid=_this$props.fluid,header=_this$props.header,href=_this$props.href,image=_this$props.image,link=_this$props.link,meta=_this$props.meta,onClick=_this$props.onClick,raised=_this$props.raised,classes=(0,clsx_m.c)("ui",color,(0,classNameBuilders.gj)(centered,"centered"),(0,classNameBuilders.gj)(fluid,"fluid"),(0,classNameBuilders.gj)(link,"link"),(0,classNameBuilders.gj)(raised,"raised"),"card",className),rest=(0,getUnhandledProps.c)(Card,this.props),ElementType=(0,getElementType.c)(Card,this.props,(function(){if(onClick)return"a"}));return childrenUtils.Ar(children)?childrenUtils.Ar(content)?react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes,href:href,onClick:this.handleClick}),Image.c.create(image,{autoGenerateKey:!1,defaultProps:{ui:!1,wrapped:!0}}),(description||header||meta)&&react.createElement(Card_CardContent,{description:description,header:header,meta:meta}),extra&&react.createElement(Card_CardContent,{extra:!0},extra)):react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes,href:href,onClick:this.handleClick}),content):react.createElement(ElementType,(0,esm_extends.c)({},rest,{className:classes,href:href,onClick:this.handleClick}),children)},Card}(react.Component);Card.handledProps=["as","centered","children","className","color","content","description","extra","fluid","header","href","image","link","meta","onClick","raised"],Card.propTypes={},Card.Content=Card_CardContent,Card.Description=Card_CardDescription,Card.Group=Card_CardGroup,Card.Header=Card_CardHeader,Card.Meta=Card_CardMeta;var Button=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Button/Button.js"),Dropdown=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/modules/Dropdown/Dropdown.js"),lib=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/index.js"),message=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/components/message.js"),injectIntl=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/components/injectIntl.js"),Icon=__webpack_require__("./src/components/theme/Icon/Icon.jsx"),Toolbar=__webpack_require__("./src/components/manage/Toolbar/Toolbar.jsx"),UniversalLink=__webpack_require__("./src/components/manage/UniversalLink/UniversalLink.jsx"),rules=__webpack_require__("./src/actions/rules/rules.js"),react_toastify=__webpack_require__("../../../node_modules/.pnpm/react-toastify@5.5.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/react-toastify/esm/react-toastify.js"),Toast=__webpack_require__("./src/components/manage/Toast/Toast.jsx"),back=__webpack_require__("./src/icons/back.svg"),back_default=__webpack_require__.n(back),up=__webpack_require__("./src/icons/up.svg"),up_default=__webpack_require__.n(up),down=__webpack_require__("./src/icons/down.svg"),down_default=__webpack_require__.n(down),objectSpread2=__webpack_require__("../../../node_modules/.pnpm/@babel+runtime@7.20.6/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),Modal=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/modules/Modal/Modal.js"),vocabularies=__webpack_require__("./src/actions/vocabularies/vocabularies.js"),Form=__webpack_require__("./src/components/manage/Form/index.tsx"),__jsx=react.createElement;const VariableModal=({open:open,type:type,onClose:onClose,onOpen:onOpen,onSave:onSave,value:value,vocabularies:vocabularies,getVocabulary:getVocabulary,action:action,formData:formData})=>{const[vocabularyName,setVocabularyName]=react.useState(""),[inputSchema,setInputSchema]=react.useState(""),{addview:addview=""}=value||{};react.useEffect((()=>{if(null!=value&&value.title){const detectedVocab=(type=>{switch(type){case"Content type":return"plone.app.vocabularies.ReallyUserFriendlyTypes";case"Workflow state":return"plone.app.vocabularies.WorkflowStates";case"User's group":return"plone.app.vocabularies.Groups";case"User's role":return"plone.app.vocabularies.Roles";case"Transition workflow state":return"plone.app.vocabularies.WorkflowTransitions";default:return""}})(value.title);detectedVocab&&(setVocabularyName(detectedVocab),getVocabulary({vocabNameOrURL:detectedVocab}))}}),[value,open,formData]),react.useEffect((()=>{setInputSchema("");const rawSchema=value["@schema"]||formData["@schema"];let schema;if(rawSchema)schema=(schema=>{const properties=(0,objectSpread2.c)({},schema.properties);return Object.keys(properties).forEach((key=>{var _value$vocabulary;const value=properties[key],vocabId=null==value||null===(_value$vocabulary=value.vocabulary)||void 0===_value$vocabulary?void 0:_value$vocabulary["@id"];null!=vocabId&&vocabId.includes("@sources")&&(value.widget="internal_url",delete value.vocabulary)})),(0,objectSpread2.c)((0,objectSpread2.c)({},schema),{},{properties:properties})})(rawSchema);else{const vocabularyOptions=vocabularyName&&vocabularies&&vocabularies[vocabularyName]&&vocabularies[vocabularyName].items?vocabularies[vocabularyName].items.map(((item,i)=>[item.value,item.label])):[];schema=((name,choices="")=>{switch(name){case"Content type":return{fieldsets:[{id:"default",title:"default",fields:["check_types"]}],properties:{check_types:{title:"Content Types",isMulti:!0,default:choices&&choices.length>0?choices[0]:"",choices:choices}},required:["check_types"]};case"File Extension":return{fieldsets:[{id:"default",title:"default",fields:["file_extension"]}],properties:{file_extension:{title:"File Extension",type:"string"}},required:["file_extension"]};case"Workflow state":return{fieldsets:[{id:"default",title:"default",fields:["wf_states"]}],properties:{wf_states:{title:"Workflow State",isMulti:!0,default:choices&&choices.length>0?choices[0]:"",choices:choices}},required:["wf_states"]};case"User's group":return{fieldsets:[{id:"default",title:"default",fields:["group_names"]}],properties:{group_names:{title:"Groups",isMulti:!0,default:choices&&choices.length>0?choices[0]:"",choices:choices}},required:["group_names"]};case"User's role":return{fieldsets:[{id:"default",title:"default",fields:["role_names"]}],properties:{role_names:{title:"Roles",isMulti:!0,default:choices&&choices.length>0?choices[0]:"",choices:choices}},required:["role_names"]};case"TALES expression":return{fieldsets:[{id:"default",title:"default",fields:["tales_expression"]}],properties:{tales_expression:{title:"File Extension",type:"string"}},required:["tales_expression"]};case"Logger":return{title:"Logger",fieldsets:[{id:"default",title:"Logger Action",fields:["targetLogger","Level","message"]}],properties:{targetLogger:{title:"Logger name",type:"string"},Level:{title:"Logging level",type:"string"},message:{title:"Message",type:"string"}},required:["targetLogger","Level","message"]};case"Notify user":return{title:"Notify user",fieldsets:[{id:"default",title:"Message",fields:["message","message_type"]}],properties:{message:{title:"Message",type:"string"},message_type:{title:"Message Type",default:["info","info"],choices:[["info","info"],["warning","warning"],["error","error"]]}},required:["message","message_type"]};case"Copy to folder":case"Move to folder":return{title:"Target folder: ",fieldsets:[{id:"default",title:"Target folder: ",fields:["target_folder"]}],properties:{target_folder:{title:"Target folder: ",widget:"internal_url"}},required:["target_folder"]};case"Delete object":case"IMSv4: Retract and rename old Indicator":return{title:"Delete",fieldsets:[{id:"default",title:"Target folder: ",fields:[]}],properties:{},required:[]};case"Transition workflow state":return{fieldsets:[{id:"default",title:"Transition workflow state",fields:["transition"]}],properties:{transition:{title:"Transition workflow state",isMulti:!0,default:choices&&choices.length>0?choices[0]:"",choices:choices}},required:["transition"]};case"Send email":return{title:"Send mail",fieldsets:[{id:"default",title:"Send mail",fields:["subject","source","recipients","exclude_actor","message"]}],properties:{message:{title:"Message",widget:"textarea"},subject:{title:"Subject",type:"string"},source:{title:"Email source",type:"string"},recipients:{title:"Email Recipients",type:"string"},exclude_actor:{title:"Exclude actor from recipients",description:"Do not send the email to the user that did the action.",type:"boolean"}},required:["subject","recipients","message"]};case"Version object":return{title:"Send mail",fieldsets:[{id:"default",title:"Send mail",fields:["comment"]}],properties:{comment:{title:"Comment",type:"string"}},required:["comment"]};default:return""}})(value.title,vocabularyOptions)}setInputSchema(schema)}),[vocabularies,open,formData,value]);const handleSave=v=>{"add"===action&&onSave((0,objectSpread2.c)((0,objectSpread2.c)({},v),{},{type:addview})),"edit"===action&&onSave(v),setInputSchema(""),onClose()},handleClose=()=>{setInputSchema(""),setVocabularyName(""),onClose()};return __jsx("div",null,inputSchema&&"add"===action&&__jsx(Form.Ah,{dimmer:__jsx(Modal.c.Dimmer,{style:{zIndex:99}}),open:open,onSubmit:data=>handleSave(data),onCancel:handleClose,title:`Add ${value.title} ${type}`,schema:inputSchema}),inputSchema&&"edit"===action&&formData&&__jsx(Form.Ah,{dimmer:__jsx(Modal.c.Dimmer,{style:{zIndex:99}}),open:open,onSubmit:data=>handleSave(data),onCancel:handleClose,formData:formData||"",title:`Add ${value.title} ${type}`,schema:inputSchema}))};var components_VariableModal=(0,redux.compose)(injectIntl.cp,(0,es.connect)(((state,props)=>({vocabularies:state.vocabularies})),{getVocabulary:vocabularies.u}))(VariableModal);VariableModal.__docgenInfo={description:"",methods:[],displayName:"VariableModal"};var ConfigureRule_jsx=react.createElement;const messages=(0,lib.defineMessages)({back:{id:"Back",defaultMessage:"Back"},configRule:{id:"Configure content rule",defaultMessage:"Configure content rule"},success:{id:"Success",defaultMessage:"Success"},deleteCondition:{id:"Delete condition",defaultMessage:"Condition deleted"},addCondition:{id:"Add condition",defaultMessage:"Condition added"},deleteAction:{id:"Delete action",defaultMessage:"Action deleted"},addAction:{id:"Add action",defaultMessage:"Action added"},editAction:{id:"Action changed",defaultMessage:"Action changed"},editCondition:{id:"Condition changed",defaultMessage:"Condition changed"},move:{id:"Position changed",defaultMessage:"Position changed"},moveUp:{id:"Move up",defaultMessage:"Move up"},moveDown:{id:"Move down",defaultMessage:"Move down"}});class ConfigureRule extends react.Component{constructor(props){super(props),this.openConditionModal=this.openConditionModal.bind(this),this.openActionModal=this.openActionModal.bind(this),this.handleConditionAdd=this.handleConditionAdd.bind(this),this.handleActionAdd=this.handleActionAdd.bind(this),this.openEditCondition=this.openEditCondition.bind(this),this.openEditAction=this.openEditAction.bind(this),this.handleEditCondition=this.handleEditCondition.bind(this),this.handleEditAction=this.handleEditAction.bind(this),this.state={isClient:!1,openModal:!1,selConditionToAdd:"",selActionToAdd:"",selConditionToEdit:"",selActionToEdit:"",conditionFormData:"",actionFormData:""}}componentDidMount(){var _this$props,_this$props$match,_this$props$match$par;this.setState({isClient:!0}),this.props.getControlPanelRule((0,Url.U$)(this.props.pathname),null===(_this$props=this.props)||void 0===_this$props||null===(_this$props$match=_this$props.match)||void 0===_this$props$match||null===(_this$props$match$par=_this$props$match.params)||void 0===_this$props$match$par?void 0:_this$props$match$par.id)}componentDidUpdate(prevProps,prevState){var _this$props3,_this$props3$rule,_this$props4,_this$props4$rule,_this$props7,_this$props7$rule,_this$props8,_this$props8$rule,_this$props2,_this$props2$match,_this$props2$match$pa,_this$props6,_this$props6$match,_this$props6$match$pa;this.state.selConditionToEdit&&prevState.selConditionToEdit!==this.state.selConditionToEdit&&this.props.getCondition((0,Url.U$)(this.props.pathname),null===(_this$props2=this.props)||void 0===_this$props2||null===(_this$props2$match=_this$props2.match)||void 0===_this$props2$match||null===(_this$props2$match$pa=_this$props2$match.params)||void 0===_this$props2$match$pa?void 0:_this$props2$match$pa.id,this.state.selConditionToEdit.idx);if(null!==(_this$props3=this.props)&&void 0!==_this$props3&&null!==(_this$props3$rule=_this$props3.rule)&&void 0!==_this$props3$rule&&_this$props3$rule.condition&&(null===(_this$props4=this.props)||void 0===_this$props4||null===(_this$props4$rule=_this$props4.rule)||void 0===_this$props4$rule?void 0:_this$props4$rule.condition)!==(null==prevProps?void 0:prevProps.rule.condition)){var _this$props5,_this$props5$rule;const conditionFormData=null===(_this$props5=this.props)||void 0===_this$props5||null===(_this$props5$rule=_this$props5.rule)||void 0===_this$props5$rule?void 0:_this$props5$rule.condition;this.setState({conditionFormData:conditionFormData})}this.state.selActionToEdit&&prevState.selActionToEdit!==this.state.selActionToEdit&&this.props.getAction((0,Url.U$)(this.props.pathname),null===(_this$props6=this.props)||void 0===_this$props6||null===(_this$props6$match=_this$props6.match)||void 0===_this$props6$match||null===(_this$props6$match$pa=_this$props6$match.params)||void 0===_this$props6$match$pa?void 0:_this$props6$match$pa.id,this.state.selActionToEdit.idx);if(null!==(_this$props7=this.props)&&void 0!==_this$props7&&null!==(_this$props7$rule=_this$props7.rule)&&void 0!==_this$props7$rule&&_this$props7$rule.action&&(null===(_this$props8=this.props)||void 0===_this$props8||null===(_this$props8$rule=_this$props8.rule)||void 0===_this$props8$rule?void 0:_this$props8$rule.action)!==(null==prevProps?void 0:prevProps.rule.action)){var _this$props9,_this$props9$rule;const actionFormData=null===(_this$props9=this.props)||void 0===_this$props9||null===(_this$props9$rule=_this$props9.rule)||void 0===_this$props9$rule?void 0:_this$props9$rule.action;this.setState({actionFormData:actionFormData})}}UNSAFE_componentWillReceiveProps(nextProps){var _this$props10,_this$props10$match,_this$props10$match$p,_this$props11,_this$props11$match,_this$props11$match$p,_this$props12,_this$props12$match,_this$props12$match$p,_this$props13,_this$props13$match,_this$props13$match$p,_this$props14,_this$props14$match,_this$props14$match$p,_this$props15,_this$props15$match,_this$props15$match$p,_this$props16,_this$props16$match,_this$props16$match$p;this.props.rule.move.loading&&nextProps.rule.move.loaded&&(react_toastify.toast.success(ConfigureRule_jsx(Toast.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.move)})),this.props.getControlPanelRule((0,Url.U$)(this.props.pathname),null===(_this$props10=this.props)||void 0===_this$props10||null===(_this$props10$match=_this$props10.match)||void 0===_this$props10$match||null===(_this$props10$match$p=_this$props10$match.params)||void 0===_this$props10$match$p?void 0:_this$props10$match$p.id));this.props.rule.deletecondition.loading&&nextProps.rule.deletecondition.loaded&&(react_toastify.toast.success(ConfigureRule_jsx(Toast.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.deleteCondition)})),this.props.getControlPanelRule((0,Url.U$)(this.props.pathname),null===(_this$props11=this.props)||void 0===_this$props11||null===(_this$props11$match=_this$props11.match)||void 0===_this$props11$match||null===(_this$props11$match$p=_this$props11$match.params)||void 0===_this$props11$match$p?void 0:_this$props11$match$p.id));this.props.rule.editcondition.loading&&nextProps.rule.editcondition.loaded&&(react_toastify.toast.success(ConfigureRule_jsx(Toast.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.editCondition)})),this.props.getControlPanelRule((0,Url.U$)(this.props.pathname),null===(_this$props12=this.props)||void 0===_this$props12||null===(_this$props12$match=_this$props12.match)||void 0===_this$props12$match||null===(_this$props12$match$p=_this$props12$match.params)||void 0===_this$props12$match$p?void 0:_this$props12$match$p.id));this.props.rule.editaction.loading&&nextProps.rule.editaction.loaded&&(react_toastify.toast.success(ConfigureRule_jsx(Toast.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.editAction)})),this.props.getControlPanelRule((0,Url.U$)(this.props.pathname),null===(_this$props13=this.props)||void 0===_this$props13||null===(_this$props13$match=_this$props13.match)||void 0===_this$props13$match||null===(_this$props13$match$p=_this$props13$match.params)||void 0===_this$props13$match$p?void 0:_this$props13$match$p.id));this.props.rule.addcondition.loading&&nextProps.rule.addcondition.loaded&&(react_toastify.toast.success(ConfigureRule_jsx(Toast.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.addCondition)})),this.props.getControlPanelRule((0,Url.U$)(this.props.pathname),null===(_this$props14=this.props)||void 0===_this$props14||null===(_this$props14$match=_this$props14.match)||void 0===_this$props14$match||null===(_this$props14$match$p=_this$props14$match.params)||void 0===_this$props14$match$p?void 0:_this$props14$match$p.id));this.props.rule.deleteaction.loading&&nextProps.rule.deleteaction.loaded&&(react_toastify.toast.success(ConfigureRule_jsx(Toast.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.deleteAction)})),this.props.getControlPanelRule((0,Url.U$)(this.props.pathname),null===(_this$props15=this.props)||void 0===_this$props15||null===(_this$props15$match=_this$props15.match)||void 0===_this$props15$match||null===(_this$props15$match$p=_this$props15$match.params)||void 0===_this$props15$match$p?void 0:_this$props15$match$p.id));this.props.rule.addaction.loading&&nextProps.rule.addaction.loaded&&(react_toastify.toast.success(ConfigureRule_jsx(Toast.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.addAction)})),this.props.getControlPanelRule((0,Url.U$)(this.props.pathname),null===(_this$props16=this.props)||void 0===_this$props16||null===(_this$props16$match=_this$props16.match)||void 0===_this$props16$match||null===(_this$props16$match$p=_this$props16$match.params)||void 0===_this$props16$match$p?void 0:_this$props16$match$p.id))}onCancel(){this.props.history.push((0,Url.yn)((0,Url.yn)(this.props.pathname)))}handleRemoveCondition(conditionId){var _this$props17,_this$props17$match,_this$props17$match$p;const ruleId=null===(_this$props17=this.props)||void 0===_this$props17||null===(_this$props17$match=_this$props17.match)||void 0===_this$props17$match||null===(_this$props17$match$p=_this$props17$match.params)||void 0===_this$props17$match$p?void 0:_this$props17$match$p.id;this.props.removeCondition((0,Url.U$)(this.props.pathname),ruleId,conditionId)}handleEditCondition(val){var _this$props18,_this$props18$match,_this$props18$match$p;const ruleId=null===(_this$props18=this.props)||void 0===_this$props18||null===(_this$props18$match=_this$props18.match)||void 0===_this$props18$match||null===(_this$props18$match$p=_this$props18$match.params)||void 0===_this$props18$match$p?void 0:_this$props18$match$p.id;this.state.selConditionToEdit&&this.props.editCondition((0,Url.U$)(this.props.pathname),ruleId,val,this.state.selConditionToEdit.idx)}handleEditAction(val){var _this$props19,_this$props19$match,_this$props19$match$p;const ruleId=null===(_this$props19=this.props)||void 0===_this$props19||null===(_this$props19$match=_this$props19.match)||void 0===_this$props19$match||null===(_this$props19$match$p=_this$props19$match.params)||void 0===_this$props19$match$p?void 0:_this$props19$match$p.id;this.state.selActionToEdit&&this.props.editAction((0,Url.U$)(this.props.pathname),ruleId,val,this.state.selActionToEdit.idx)}openEditCondition(cond_id){this.setState({selConditionToEdit:cond_id,openModal:!0,selActionToEdit:""})}openEditAction(action_id){this.setState({selActionToEdit:action_id,openModal:!0,selConditionToEdit:""})}openConditionModal(){this.state.selConditionToAdd&&this.setState({openModal:!0})}handleConditionAdd(val){var _this$props20,_this$props20$match,_this$props20$match$p;const ruleId=null===(_this$props20=this.props)||void 0===_this$props20||null===(_this$props20$match=_this$props20.match)||void 0===_this$props20$match||null===(_this$props20$match$p=_this$props20$match.params)||void 0===_this$props20$match$p?void 0:_this$props20$match$p.id;this.props.addCondition((0,Url.U$)(this.props.pathname),ruleId,val),this.setState({selConditionToAdd:""})}openActionModal(){this.setState({openModal:!0})}handleActionAdd(val){var _this$props21,_this$props21$match,_this$props21$match$p;const ruleId=null===(_this$props21=this.props)||void 0===_this$props21||null===(_this$props21$match=_this$props21.match)||void 0===_this$props21$match||null===(_this$props21$match$p=_this$props21$match.params)||void 0===_this$props21$match$p?void 0:_this$props21$match$p.id;this.props.addAction((0,Url.U$)(this.props.pathname),ruleId,val),this.setState({selConditionToAdd:""})}handleRemoveAction(actionId){var _this$props22,_this$props22$match,_this$props22$match$p;const ruleId=null===(_this$props22=this.props)||void 0===_this$props22||null===(_this$props22$match=_this$props22.match)||void 0===_this$props22$match||null===(_this$props22$match$p=_this$props22$match.params)||void 0===_this$props22$match$p?void 0:_this$props22$match$p.id;this.props.removeAction((0,Url.U$)(this.props.pathname),ruleId,actionId)}handleMoveAction(action,direction){var _this$props23,_this$props23$match,_this$props23$match$p;const ruleId=null===(_this$props23=this.props)||void 0===_this$props23||null===(_this$props23$match=_this$props23.match)||void 0===_this$props23$match||null===(_this$props23$match$p=_this$props23$match.params)||void 0===_this$props23$match$p?void 0:_this$props23$match$p.id;this.props.moveRuleAction((0,Url.U$)(this.props.pathname),{"form.button.Move":"up"===direction?"_move_up":"_move_down"},ruleId,action)}handleMoveCondition(condition,direction){var _this$props24,_this$props24$match,_this$props24$match$p;const ruleId=null===(_this$props24=this.props)||void 0===_this$props24||null===(_this$props24$match=_this$props24.match)||void 0===_this$props24$match||null===(_this$props24$match$p=_this$props24$match.params)||void 0===_this$props24$match$p?void 0:_this$props24$match$p.id;this.props.moveRuleCondition((0,Url.U$)(this.props.pathname),{"form.button.Move":"up"===direction?"_move_up":"_move_down"},ruleId,condition)}render(){const{item:item={}}=this.props.rule||{},{actions:actions=[],addable_actions:addable_actions=[],addable_conditions:addable_conditions=[],assignments:assignments=[],conditions:conditions=[],title:title=""}=item,conditions_options=addable_conditions.map((cond=>({key:cond.title,text:cond.title,value:cond}))),actions_options=addable_actions.map((act=>({key:act.title,text:act.title,value:act})));return ConfigureRule_jsx("div",{id:"page-rule-configure"},ConfigureRule_jsx(Helmet.c,{title:this.props.intl.formatMessage(messages.configRule)}),ConfigureRule_jsx(Container.c,null,ConfigureRule_jsx("article",{id:"content"},ConfigureRule_jsx(Segment.c.Group,{raised:!0},ConfigureRule_jsx(Segment.c,{className:"primary"},ConfigureRule_jsx(message.c,{id:"Configure Content Rule: {title}",defaultMessage:"Configure Content Rule: {title}",values:{title:ConfigureRule_jsx("q",null,title)}})),ConfigureRule_jsx(Segment.c,{className:"secondary"},ConfigureRule_jsx(message.c,{id:"Rules execute when a triggering event occurs. Rule actions will only be invoked if all the rule's conditions are met. You can add new actions and conditions using the buttons below.",defaultMessage:"Rules execute when a triggering event occurs. Rule actions will only be invoked if all the rule's conditions are met. You can add new actions and conditions using the buttons below."})),ConfigureRule_jsx(Segment.c,null,ConfigureRule_jsx(Grid.c,null,ConfigureRule_jsx(Grid.c.Row,null,ConfigureRule_jsx(Grid.c.Column,{mobile:16,tablet:16,computer:6,largeScreen:6},ConfigureRule_jsx("h4",null,ConfigureRule_jsx(message.c,{id:"If all of the following conditions are met:",defaultMessage:"If all of the following conditions are met:"})),conditions&&conditions.length>0&&ConfigureRule_jsx(Card.Group,null,conditions.map(((cond,i)=>ConfigureRule_jsx(Card,{fluid:!0,key:i},ConfigureRule_jsx(Card.Content,null,ConfigureRule_jsx(Card.Header,null,ConfigureRule_jsx("h4",null,cond.title)),ConfigureRule_jsx(Card.Description,null,cond.summary)),ConfigureRule_jsx(Card.Content,{extra:!0},ConfigureRule_jsx(Button.c,{onClick:()=>this.openEditCondition(cond),compact:!0,size:"tiny",primary:!0},"Edit"),ConfigureRule_jsx(Button.c,{onClick:()=>this.handleRemoveCondition(cond.idx),compact:!0,size:"tiny",color:"youtube"},"Remove"),ConfigureRule_jsx(Button.c,{compact:!0,size:"tiny",primary:!0,disabled:null==cond?void 0:cond.first,onClick:()=>this.handleMoveCondition(cond.idx,"up")},ConfigureRule_jsx(Button.c.Content,null,ConfigureRule_jsx(Icon.c,{name:up_default(),size:"10px",title:this.props.intl.formatMessage(messages.moveUp)}))),ConfigureRule_jsx(Button.c,{compact:!0,size:"tiny",primary:!0,disabled:null==cond?void 0:cond.last,onClick:()=>this.handleMoveCondition(cond.idx,"down")},ConfigureRule_jsx(Button.c.Content,null,ConfigureRule_jsx(Icon.c,{name:down_default(),size:"10px",title:this.props.intl.formatMessage(messages.moveDown)})))))))),ConfigureRule_jsx(Grid.c.Row,null,ConfigureRule_jsx("h4",{style:{marginTop:"15px"}},ConfigureRule_jsx(message.c,{id:"Condition: ",defaultMessage:"Condition: "})),ConfigureRule_jsx(Dropdown.c,{style:{margin:"5px 0"},placeholder:"Select condition",fluid:!0,selection:!0,options:conditions_options,value:this.state.selConditionToAdd,onChange:(e,{value:value})=>this.setState({selConditionToAdd:value})}),ConfigureRule_jsx(Button.c,{compact:!0,onClick:this.openConditionModal,primary:!0},ConfigureRule_jsx(message.c,{id:"Add",defaultMessage:"Add"})))),ConfigureRule_jsx(Grid.c.Column,{mobile:16,tablet:16,computer:6,largeScreen:6},ConfigureRule_jsx("h4",null,ConfigureRule_jsx(message.c,{id:"Perform the following actions:",defaultMessage:"Perform the following actions:"})),actions&&actions.length>0&&ConfigureRule_jsx(Card.Group,null,actions.map(((action,i)=>ConfigureRule_jsx(Card,{fluid:!0,key:i},ConfigureRule_jsx(Card.Content,null,ConfigureRule_jsx(Card.Header,null,ConfigureRule_jsx("h4",null,action.title)),ConfigureRule_jsx(Card.Description,null,action.summary)),ConfigureRule_jsx(Card.Content,{extra:!0},ConfigureRule_jsx(Button.c,{onClick:()=>this.openEditAction(action),compact:!0,size:"tiny",primary:!0},"Edit"),ConfigureRule_jsx(Button.c,{onClick:()=>this.handleRemoveAction(action.idx),compact:!0,size:"tiny",color:"youtube"},"Remove"),ConfigureRule_jsx(Button.c,{compact:!0,size:"tiny",primary:!0,disabled:null==action?void 0:action.first,onClick:()=>this.handleMoveAction(action.idx,"up")},ConfigureRule_jsx(Button.c.Content,null,ConfigureRule_jsx(Icon.c,{name:up_default(),size:"10px",title:this.props.intl.formatMessage(messages.moveUp)}))),ConfigureRule_jsx(Button.c,{compact:!0,size:"tiny",primary:!0,disabled:null==action?void 0:action.last,onClick:()=>this.handleMoveAction(action.idx,"down")},ConfigureRule_jsx(Button.c.Content,null,ConfigureRule_jsx(Icon.c,{name:down_default(),size:"10px",title:this.props.intl.formatMessage(messages.moveDown)})))))))),ConfigureRule_jsx(Grid.c.Row,null,ConfigureRule_jsx("h4",{style:{marginTop:"15px"}},ConfigureRule_jsx(message.c,{id:"Action: ",defaultMessage:"Action: "})),ConfigureRule_jsx(Dropdown.c,{style:{margin:"5px 0"},placeholder:"Select action",fluid:!0,selection:!0,options:actions_options,onChange:(e,{value:value})=>this.setState({selActionToAdd:value})}),ConfigureRule_jsx(Button.c,{compact:!0,onClick:()=>this.openActionModal(),primary:!0},ConfigureRule_jsx(message.c,{id:"Add",defaultMessage:"Add"}))))),ConfigureRule_jsx(Grid.c.Row,{stretched:!0},ConfigureRule_jsx(Grid.c.Column,null,ConfigureRule_jsx("h4",null,ConfigureRule_jsx(message.c,{id:"Assignments",defaultMessage:"Assignments"})),ConfigureRule_jsx(message.c,{id:"This rule is assigned to the following locations:",defaultMessage:"This rule is assigned to the following locations:"}),assignments.map(((assignment,i)=>ConfigureRule_jsx(UniversalLink.c,{key:i,title:assignment.title,href:(0,Url.U$)(assignment.url)},assignment.title)))))))))),this.state.selConditionToAdd&&ConfigureRule_jsx(components_VariableModal,{open:this.state.openModal,onClose:()=>this.setState({openModal:!1,selConditionToAdd:""}),onOpen:()=>this.setState({openModal:!0}),onSave:v=>this.handleConditionAdd(v),value:this.state.selConditionToAdd,type:"Condition",action:"add"}),this.state.selActionToAdd&&ConfigureRule_jsx(components_VariableModal,{open:this.state.openModal,onClose:()=>this.setState({openModal:!1,selActionToAdd:""}),onOpen:()=>this.setState({openModal:!0}),onSave:v=>this.handleActionAdd(v),value:this.state.selActionToAdd,type:"Action",action:"add"}),this.state.selConditionToEdit&&this.state.conditionFormData&&ConfigureRule_jsx(components_VariableModal,{open:this.state.openModal,onClose:()=>this.setState({openModal:!1,selConditionToEdit:"",conditionFormData:""}),onOpen:()=>this.setState({openModal:!0}),onSave:v=>this.handleEditCondition(v),value:this.state.selConditionToEdit,formData:this.state.conditionFormData,type:"Condition",action:"edit"}),this.state.selActionToEdit&&this.state.actionFormData&&ConfigureRule_jsx(components_VariableModal,{open:this.state.openModal,onClose:()=>this.setState({openModal:!1,selActionToEdit:"",actionFormData:""}),onOpen:()=>this.setState({openModal:!0}),onSave:this.handleEditAction,value:this.state.selActionToEdit,formData:this.state.actionFormData,type:"Action",action:"edit"}),this.state.isClient&&(0,react_dom.createPortal)(ConfigureRule_jsx(Toolbar.c,{pathname:this.props.pathname,hideDefaultViewButtons:!0,inner:ConfigureRule_jsx(react_router_dom.cH,{className:"item",to:"#",onClick:()=>this.onCancel()},ConfigureRule_jsx(Icon.c,{name:back_default(),className:"contents circled",size:"30px",title:this.props.intl.formatMessage(messages.back)}))}),document.getElementById("toolbar")))}}var Rules_ConfigureRule=(0,redux.compose)(injectIntl.cp,(0,es.connect)(((state,props)=>({pathname:props.location.pathname,rule:state.controlpanelrule})),{getControlPanelRule:rules.Mv,removeCondition:rules.Oi,addCondition:rules.oh,editCondition:rules.m_,getCondition:rules.Up,getAction:rules.K2,removeAction:rules.Q5,addAction:rules.pw,editAction:rules.gB,moveRuleCondition:rules.QG,moveRuleAction:rules.YL}))(ConfigureRule);ConfigureRule.__docgenInfo={description:"ConfigureRule class.\n@class ConfigureRule\n@extends Component",methods:[{name:"onCancel",docblock:"Back/Cancel handler\n@method onCancel\n@returns {undefined}",modifiers:[],params:[],returns:{},description:"Back/Cancel handler"},{name:"handleRemoveCondition",docblock:"Remove condition handler\n@method handleRemoveCondition\n@returns {undefined}",modifiers:[],params:[{name:"conditionId",optional:!1}],returns:{},description:"Remove condition handler"},{name:"handleEditCondition",docblock:"Edit condition handler\n@method handleEditCondition\n@returns {undefined}",modifiers:[],params:[{name:"val",optional:!1}],returns:{},description:"Edit condition handler"},{name:"handleEditAction",docblock:"Edit action handler\n@method handleEditAction\n@returns {undefined}",modifiers:[],params:[{name:"val",optional:!1}],returns:{},description:"Edit action handler"},{name:"openEditCondition",docblock:"open modal edit condition handler\n@method openEditCondition\n@returns {undefined}",modifiers:[],params:[{name:"cond_id",optional:!1}],returns:{},description:"open modal edit condition handler"},{name:"openEditAction",docblock:"open modal edit action handler\n@method openEditAction\n@returns {undefined}",modifiers:[],params:[{name:"action_id",optional:!1}],returns:{},description:"open modal edit action handler"},{name:"openConditionModal",docblock:"Add condition handler\n@method openConditionModal\n@returns {undefined}",modifiers:[],params:[],returns:{},description:"Add condition handler"},{name:"handleConditionAdd",docblock:"Condition save handler\n@method handleConditionAdd\n@returns {undefined}",modifiers:[],params:[{name:"val",optional:!1}],returns:{},description:"Condition save handler"},{name:"openActionModal",docblock:"Add action handler\n@method openActionModal\n@returns {undefined}",modifiers:[],params:[],returns:{},description:"Add action handler"},{name:"handleActionAdd",docblock:"Action save handler\n@method handleActionAdd\n@returns {undefined}",modifiers:[],params:[{name:"val",optional:!1}],returns:{},description:"Action save handler"},{name:"handleRemoveAction",docblock:"Remove action handler\n@method handleRemoveAction\n@returns {undefined}",modifiers:[],params:[{name:"actionId",optional:!1}],returns:{},description:"Remove action handler"},{name:"handleMoveAction",docblock:"Move action handler\n@method handleMoveAction\n@returns {undefined}",modifiers:[],params:[{name:"action",optional:!1},{name:"direction",optional:!1}],returns:{},description:"Move action handler"},{name:"handleMoveCondition",docblock:"Move action handler\n@method handleMoveCondition\n@returns {undefined}",modifiers:[],params:[{name:"condition",optional:!1},{name:"direction",optional:!1}],returns:{},description:"Move action handler"}],displayName:"ConfigureRule",props:{getControlPanelRule:{description:"",type:{name:"func"},required:!0},removeCondition:{description:"",type:{name:"func"},required:!0},addCondition:{description:"",type:{name:"func"},required:!0},removeAction:{description:"",type:{name:"func"},required:!0},addAction:{description:"",type:{name:"func"},required:!0},moveRuleCondition:{description:"",type:{name:"func"},required:!0},moveRuleAction:{description:"",type:{name:"func"},required:!0}}}},"./src/components/manage/Controlpanels/Rules/EditRule.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/react-redux@8.1.2_@types+react-dom@18.2.12_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0__react@18.2.0_redux@4.2.1/node_modules/react-redux/es/index.js"),redux__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../../node_modules/.pnpm/redux@4.2.1/node_modules/redux/es/redux.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../../node_modules/.pnpm/react-router-dom@5.2.0_react@18.2.0/node_modules/react-router-dom/esm/react-router-dom.js"),_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/Url/Url.js"),_plone_volto_helpers_Helmet_Helmet__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/helpers/Helmet/Helmet.jsx"),react_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../../node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/index.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Container/Container.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/collections/Form/Form.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/collections/Grid/Grid.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/modules/Checkbox/Checkbox.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Button/Button.js"),react_intl__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/index.js"),react_intl__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/components/message.js"),react_intl__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/components/injectIntl.js"),_plone_volto_components_theme_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/theme/Icon/Icon.jsx"),_plone_volto_components_manage_Toolbar_Toolbar__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/manage/Toolbar/Toolbar.jsx"),_plone_volto_components_manage_Toast_Toast__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/manage/Toast/Toast.jsx"),_plone_volto_components_manage_Form__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/components/manage/Form/index.tsx"),_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/actions/rules/rules.js"),react_toastify__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../../node_modules/.pnpm/react-toastify@5.5.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/react-toastify/esm/react-toastify.js"),_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/icons/back.svg"),_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_9___default=__webpack_require__.n(_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_9__),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;const messages=(0,react_intl__WEBPACK_IMPORTED_MODULE_10__.defineMessages)({back:{id:"Back",defaultMessage:"Back"},configRule:{id:"Configure Content Rule",defaultMessage:"Configure Content Rule"},success:{id:"Success",defaultMessage:"Success"},edit:{id:"Edit",defaultMessage:"Rule edited"}});class EditRule extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state={id:"",isClient:!1,title:"",description:"",event:"",cascading:!1,stop:!1,enabled:!1,invalidForm:!0,invalidTitle:!1,invalidEvent:!1}}componentDidMount(){var _this$props,_this$props$match,_this$props$match$par;this.setState({isClient:!0}),this.props.getControlPanelRule((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.U$)(this.props.pathname),null===(_this$props=this.props)||void 0===_this$props||null===(_this$props$match=_this$props.match)||void 0===_this$props$match||null===(_this$props$match$par=_this$props$match.params)||void 0===_this$props$match$par?void 0:_this$props$match$par.id),this.props.getContentRulesEvents((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.U$)(this.props.pathname))}componentDidUpdate(prevProps,prevState){if(prevProps.rule!==this.props.rule){const{title:title,description:description,event:event,cascading:cascading,stop:stop,enabled:enabled,id:id}=this.props.rule.item||{};this.setState({id:id,title:title,description:description,event:event,cascading:cascading,stop:stop,enabled:enabled})}prevState.title===this.state.title&&prevState.event===this.state.event||(this.state.title&&this.state.event?this.setState({invalidForm:!1,invalidTitle:!1,invalidEvent:!1}):(this.state.title||this.setState({invalidForm:!0,invalidTitle:!0}),this.state.event||this.setState({invalidForm:!0,invalidEvent:!0})))}UNSAFE_componentWillReceiveProps(nextProps){var _this$props2,_this$props2$match,_this$props2$match$pa;this.props.rule.edit.loading&&nextProps.rule.edit.loaded&&(react_toastify__WEBPACK_IMPORTED_MODULE_11__.toast.success(__jsx(_plone_volto_components_manage_Toast_Toast__WEBPACK_IMPORTED_MODULE_7__.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.edit)})),this.props.getControlPanelRule((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.U$)(this.props.pathname),null===(_this$props2=this.props)||void 0===_this$props2||null===(_this$props2$match=_this$props2.match)||void 0===_this$props2$match||null===(_this$props2$match$pa=_this$props2$match.params)||void 0===_this$props2$match$pa?void 0:_this$props2$match$pa.id))}onCancel(){this.props.history.push((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.yn)((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.yn)(this.props.pathname)))}handleUpdate(){const{id:id,title:title,description:description,event:event,cascading:cascading,stop:stop,enabled:enabled,invalidForm:invalidForm}=this.state,data={title:title,description:description,event:event,cascading:cascading,enabled:enabled,stop:stop};invalidForm||this.props.editRule((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_2__.U$)(this.props.pathname),data,id)}render(){var _this$props$events,_this$props$events2,_this$props$events3;const{title:title,description:description,event:event,cascading:cascading,stop:stop,enabled:enabled}=this.state,triggeringEvents=null!==(_this$props$events=this.props.events)&&void 0!==_this$props$events&&_this$props$events.items&&(null===(_this$props$events2=this.props.events)||void 0===_this$props$events2?void 0:_this$props$events2.items.length)>0?null===(_this$props$events3=this.props.events)||void 0===_this$props$events3?void 0:_this$props$events3.items.map((event=>[event.token,event.title])):"";return __jsx("div",{id:"page-rule-edit"},__jsx(_plone_volto_helpers_Helmet_Helmet__WEBPACK_IMPORTED_MODULE_3__.c,{title:this.props.intl.formatMessage(messages.configRule)}),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_12__.c,null,__jsx("article",{id:"content"},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c.Group,{raised:!0},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,{className:"primary"},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Edit Rule",defaultMessage:"Edit Rule"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,{className:"secondary"},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Use the form below to define the new content rule",defaultMessage:"Use the form below to define the new content rule"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_15__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Row,{stretched:!0},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Column,null,__jsx(_plone_volto_components_manage_Form__WEBPACK_IMPORTED_MODULE_8__.IN,{title:"Title",description:"Please set a descriptive title for the rule.",value:title,required:!0,onChange:(e,t)=>this.setState({title:t})}))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Row,{stretched:!0},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Column,null,__jsx(_plone_volto_components_manage_Form__WEBPACK_IMPORTED_MODULE_8__.IN,{title:"Description",description:"Enter a short description of the rule and its purpose.",value:description,onChange:(e,d)=>this.setState({description:d})}))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Row,{stretched:!0},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c.Column,null,__jsx(_plone_volto_components_manage_Form__WEBPACK_IMPORTED_MODULE_8__.IN,{required:!0,title:"Triggering event",description:"The rule will execute when the following event occurs.",choices:triggeringEvents,value:event,onChange:(e,v)=>this.setState({event:v})})))))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx("div",{style:{display:"flex",flexDirection:"column"}},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c,{onChange:(e,{checked:checked})=>this.setState({enabled:checked}),label:"Enabled",checked:enabled}),__jsx("p",{style:{color:"#878f93",paddingTop:"0.7rem",paddingBottom:"0.7rem",fontSize:"0.9rem"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Whether or not the rule is currently enabled",defaultMessage:"Whether or not the rule is currently enabled"})))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx("div",{style:{display:"flex",flexDirection:"column"}},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c,{onChange:(e,{checked:checked})=>this.setState({stop:checked}),label:"Stop Executing rules",checked:stop}),__jsx("p",{style:{color:"#878f93",paddingTop:"0.7rem",paddingBottom:"0.7rem",fontSize:"0.9rem"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Whether or not execution of further rules should stop after this rule is executed",defaultMessage:"Whether or not execution of further rules should stop after this rule is executed"})))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx("div",{style:{display:"flex",flexDirection:"column"}},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c,{onChange:(e,{checked:checked})=>this.setState({cascading:checked}),label:"Cascading rule",checked:cascading}),__jsx("p",{style:{color:"#878f93",paddingTop:"0.7rem",paddingBottom:"0.7rem",fontSize:"0.9rem"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Whether or not other rules should be triggered by the actions launched by this rule. Activate this only if you are sure this won't create infinite loops",defaultMessage:"Whether or not other rules should be triggered by the actions launched by this rule. Activate this only if you are sure this won't create infinite loops"})))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__.c,{onClick:()=>this.handleUpdate(),primary:!0},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Save",defaultMessage:"Save"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__.c,{onClick:()=>this.onCancel(),secondary:!0},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Cancel",defaultMessage:"Cancel"}))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_13__.c,null,this.state.invalidTitle&&__jsx("p",{style:{color:"red"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Title field error. Value not provided or already existing.",defaultMessage:"Title field error. Value not provided or already existing."})),this.state.invalidEvent&&__jsx("p",{style:{color:"red"}},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_14__.c,{id:"Triggering event field error. Please select a value",defaultMessage:"Triggering event field error. Please select a value"})))))),this.state.isClient&&(0,react_dom__WEBPACK_IMPORTED_MODULE_4__.createPortal)(__jsx(_plone_volto_components_manage_Toolbar_Toolbar__WEBPACK_IMPORTED_MODULE_6__.c,{pathname:this.props.pathname,hideDefaultViewButtons:!0,inner:__jsx(react_router_dom__WEBPACK_IMPORTED_MODULE_19__.cH,{className:"item",to:"#",onClick:()=>this.onCancel()},__jsx(_plone_volto_components_theme_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__.c,{name:_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_9___default(),className:"contents circled",size:"30px",title:this.props.intl.formatMessage(messages.back)}))}),document.getElementById("toolbar")))}}__webpack_exports__.default=(0,redux__WEBPACK_IMPORTED_MODULE_20__.compose)(react_intl__WEBPACK_IMPORTED_MODULE_21__.cp,(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.connect)(((state,props)=>({events:state.contentrulesevents,rule:state.controlpanelrule,pathname:props.location.pathname})),{getControlPanelRule:_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__.Mv,getContentRulesEvents:_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__._,editRule:_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__.oz}))(EditRule),EditRule.__docgenInfo={description:"EditRule class.\n@class EditRule\n@extends Component",methods:[{name:"onCancel",docblock:"Back/Cancel handler\n@method onCancel\n@returns {undefined}",modifiers:[],params:[],returns:{},description:"Back/Cancel handler"},{name:"handleUpdate",docblock:"Update rule handler\n@method handleUpdate\n@returns {undefined}",modifiers:[],params:[],returns:{},description:"Update rule handler"}],displayName:"EditRule",props:{getContentRulesEvents:{description:"",type:{name:"func"},required:!0},editRule:{description:"",type:{name:"func"},required:!0},getControlPanelRule:{description:"",type:{name:"func"},required:!0}}}},"./src/components/manage/Controlpanels/Rules/Rules.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../../../node_modules/.pnpm/react@18.2.0/node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../../../node_modules/.pnpm/react-redux@8.1.2_@types+react-dom@18.2.12_@types+react@18.2.27_react-dom@18.2.0_react@18.2.0__react@18.2.0_redux@4.2.1/node_modules/react-redux/es/index.js"),redux__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__("../../../node_modules/.pnpm/redux@4.2.1/node_modules/redux/es/redux.js"),react_router_dom__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__("../../../node_modules/.pnpm/react-router-dom@5.2.0_react@18.2.0/node_modules/react-router-dom/esm/react-router-dom.js"),_plone_volto_helpers_Helmet_Helmet__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/helpers/Helmet/Helmet.jsx"),_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/helpers/Url/Url.js"),react_dom__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("../../../node_modules/.pnpm/react-dom@18.2.0_react@18.2.0/node_modules/react-dom/index.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Container/Container.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Segment/Segment.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Header/Header.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/collections/Form/Form.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/modules/Checkbox/Checkbox.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/collections/Table/Table.js"),semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__("../../../node_modules/.pnpm/semantic-ui-react@2.1.5_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/semantic-ui-react/dist/es/elements/Button/Button.js"),react_intl__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/index.js"),react_intl__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/components/message.js"),react_intl__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__("../../../node_modules/.pnpm/react-intl@3.12.1_react@18.2.0/node_modules/react-intl/lib/components/injectIntl.js"),_plone_volto_components_theme_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/theme/Icon/Icon.jsx"),_plone_volto_components_manage_Toolbar_Toolbar__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/components/manage/Toolbar/Toolbar.jsx"),react_toastify__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../../../node_modules/.pnpm/react-toastify@5.5.0_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/react-toastify/esm/react-toastify.js"),_plone_volto_components_manage_Toast_Toast__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/components/manage/Toast/Toast.jsx"),_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__("./src/actions/rules/rules.js"),_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/icons/back.svg"),_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_8__),__jsx=react__WEBPACK_IMPORTED_MODULE_0__.createElement;const messages=(0,react_intl__WEBPACK_IMPORTED_MODULE_9__.defineMessages)({back:{id:"Back",defaultMessage:"Back"},rules:{id:"Content Rules",defaultMessage:"Content Rules"},success:{id:"Success",defaultMessage:"Success"},delete:{id:"Deleted",defaultMessage:"Deleted"},enable:{id:"Rule enable changed",defaultMessage:"Rule enable changed"}});class Rules extends react__WEBPACK_IMPORTED_MODULE_0__.Component{constructor(props){super(props),this.state={isClient:!1,selectedFilters:[],selectedRules:[]}}componentDidMount(){this.props.getControlPanelRules((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_3__.U$)(this.props.pathname)),this.props.getContentRulesEvents((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_3__.U$)(this.props.pathname)),this.setState({isClient:!0})}componentDidUpdate(prevProps,prevState){if(prevProps.rules!==this.props.rules&&this.props.rules.items&&this.setState({selectedRules:this.props.rules.items}),prevState.selectedFilters!==this.state.selectedFilters&&this.props.rules.items)if(this.state.selectedFilters.length>0){let filteredRules=this.props.rules.items.filter((rule=>this.state.selectedFilters.includes(rule.trigger)));this.setState({selectedRules:filteredRules})}else this.setState({selectedRules:this.props.rules.items})}UNSAFE_componentWillReceiveProps(nextProps){this.props.indivRule.edit.loading&&nextProps.indivRule.edit.loaded&&(react_toastify__WEBPACK_IMPORTED_MODULE_10__.toast.success(__jsx(_plone_volto_components_manage_Toast_Toast__WEBPACK_IMPORTED_MODULE_7__.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.enable)})),this.props.getControlPanelRules((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_3__.U$)(this.props.pathname))),this.props.indivRule.delete.loading&&nextProps.indivRule.delete.loaded&&(this.props.getControlPanelRules((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_3__.U$)(this.props.pathname)),react_toastify__WEBPACK_IMPORTED_MODULE_10__.toast.success(__jsx(_plone_volto_components_manage_Toast_Toast__WEBPACK_IMPORTED_MODULE_7__.c,{success:!0,title:this.props.intl.formatMessage(messages.success),content:this.props.intl.formatMessage(messages.delete)})))}onCancel(){this.props.history.push((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_3__.yn)(this.props.pathname))}handleSelectFilterType(type){this.setState({filterType:type})}handleAddRule(){this.props.history.push(`${this.props.pathname}/add`)}handleConfigure(ruleId){this.props.history.push(`${this.props.pathname}/${ruleId}/configure`)}handleEdit(ruleId){this.props.history.push(`${this.props.pathname}/${ruleId}/edit`)}handleDelete(ruleId){this.props.deleteControlPanelRule((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_3__.U$)(this.props.pathname),ruleId)}handleSetFilters(value){this.state.selectedFilters.includes(value)?this.setState({selectedFilters:this.state.selectedFilters.filter((f=>f!==value))}):this.setState({selectedFilters:[...this.state.selectedFilters,value]})}handleEnableRule(rule){const{id:id,cascading:cascading,description:description,enabled:enabled,event:event,stop:stop,title:title}=rule;this.props.editRule((0,_plone_volto_helpers_Url_Url__WEBPACK_IMPORTED_MODULE_3__.U$)(this.props.pathname),{id:id,cascading:cascading,description:description,enabled:!enabled,event:event,stop:stop,title:title},id)}render(){return __jsx("div",{id:"page-rules"},__jsx(_plone_volto_helpers_Helmet_Helmet__WEBPACK_IMPORTED_MODULE_2__.c,{title:this.props.intl.formatMessage(messages.rules)}),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_11__.c,null,__jsx("article",{id:"content"},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_12__.c.Group,{raised:!0},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_12__.c,{className:"primary"},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.c,{id:"Content Rules",defaultMessage:"Content Rules"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_12__.c,{className:"secondary"},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.c,{id:"Use the form below to define, change or remove content rules. Rules will automatically perform actions on content when certain triggers take place. After defining rules, you may want to go to a folder to assign them, using the 'rules' item in the actions menu.",defaultMessage:"Use the form below to define, change or remove content rules. Rules will automatically perform actions on content when certain triggers take place. After defining rules, you may want to go to a folder to assign them, using the 'rules' item in the actions menu."})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_12__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_14__.c,{size:"small"},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.c,{id:"Filter Rules:",defaultMessage:"Filter Rules:"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_15__.c,null,__jsx("div",{style:{display:"flex",flexWrap:"wrap"}},this.props.events&&this.props.events.items&&this.props.events.items.length>0&&this.props.events.items.map((event=>({label:event.title,value:event.title}))).map(((o,i)=>__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_15__.c.Field,{style:{marginRight:"15px"},key:i},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c,{onChange:(e,{value:value})=>this.handleSetFilters(value),checked:this.state.selectedFilters.includes[o.value],value:o.value,label:o.label})))))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.Body,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.Row,null,__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.HeaderCell,null,__jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.c,{id:"Content Rule",defaultMessage:"Content Rule"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.HeaderCell,null,__jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.c,{id:"Event",defaultMessage:"Event"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.HeaderCell,null,__jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.c,{id:"Status",defaultMessage:"Status"})),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.HeaderCell,null,__jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.c,{id:"Actions",defaultMessage:"Actions"}))),this.state.selectedRules&&this.state.selectedRules.length>0&&this.state.selectedRules.map(((rule,i)=>__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.Row,{key:i},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.Cell,null,__jsx("p",{style:{fontSize:"16px"}},rule.title),__jsx("p",{style:{fontSize:"14px"}},rule.description)),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.Cell,null,__jsx("p",null,rule.trigger)),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.Cell,null,__jsx("div",{style:{display:"flex",alignItems:"center"}},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_16__.c,{onChange:(e,o)=>this.handleEnableRule(rule),checked:rule.enabled,value:rule.enabled,label:"enabled"}),!rule.assigned&&__jsx("p",{style:{marginLeft:"5px",padding:"3px",backgroundColor:"#ffc106",borderRadius:"5px",fontSize:"10px",fontWeight:"bold"}},"not assigned"))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_17__.c.Cell,null,__jsx("div",{style:{display:"flex"}},__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__.c,{size:"mini",primary:!0,onClick:()=>this.handleConfigure(rule.id)},"Configure"),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__.c,{size:"mini",secondary:!0,onClick:()=>this.handleEdit(rule.id)},"Edit"),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__.c,{size:"mini",color:"youtube",onClick:()=>this.handleDelete(rule.id)},"Delete")))))))),__jsx(semantic_ui_react__WEBPACK_IMPORTED_MODULE_18__.c,{onClick:()=>this.handleAddRule(),primary:!0},__jsx(react_intl__WEBPACK_IMPORTED_MODULE_13__.c,{id:"Add content rule",defaultMessage:"Add content rule"})))))),this.state.isClient&&(0,react_dom__WEBPACK_IMPORTED_MODULE_4__.createPortal)(__jsx(_plone_volto_components_manage_Toolbar_Toolbar__WEBPACK_IMPORTED_MODULE_6__.c,{pathname:this.props.pathname,hideDefaultViewButtons:!0,inner:__jsx(react_router_dom__WEBPACK_IMPORTED_MODULE_19__.cH,{className:"item",to:"#",onClick:()=>this.onCancel()},__jsx(_plone_volto_components_theme_Icon_Icon__WEBPACK_IMPORTED_MODULE_5__.c,{name:_plone_volto_icons_back_svg__WEBPACK_IMPORTED_MODULE_8___default(),className:"contents circled",size:"30px",title:this.props.intl.formatMessage(messages.back)}))}),document.getElementById("toolbar")))}}__webpack_exports__.default=(0,redux__WEBPACK_IMPORTED_MODULE_20__.compose)(react_intl__WEBPACK_IMPORTED_MODULE_21__.cp,(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.connect)(((state,props)=>({indivRule:state.controlpanelrule,rules:state.controlpanelrules,events:state.contentrulesevents,pathname:props.location.pathname})),{getControlPanelRules:_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__.Os,deleteControlPanelRule:_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__.S_,getContentRulesEvents:_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__._,editRule:_plone_volto_actions_rules_rules__WEBPACK_IMPORTED_MODULE_22__.oz}))(Rules),Rules.__docgenInfo={description:"Rules class.\n@class Rules\n@extends Component",methods:[{name:"onCancel",docblock:"Back/Cancel handler\n@method onCancel\n@returns {undefined}",modifiers:[],params:[],returns:{},description:"Back/Cancel handler"},{name:"handleSelectFilterType",docblock:"Select filter type handler\n@method handleSelectFilterType\n@returns {undefined}",modifiers:[],params:[{name:"type",optional:!1}],returns:{},description:"Select filter type handler"},{name:"handleAddRule",docblock:"Add Rule handler\n@method handleAddRule\n@returns {undefined}",modifiers:[],params:[],returns:{},description:"Add Rule handler"},{name:"handleConfigure",docblock:"Configure Rule handler\n@method handleConfigure\n@returns {undefined}",modifiers:[],params:[{name:"ruleId",optional:!1}],returns:{},description:"Configure Rule handler"},{name:"handleEdit",docblock:"Edit Rule handler\n@method handleEdit\n@returns {undefined}",modifiers:[],params:[{name:"ruleId",optional:!1}],returns:{},description:"Edit Rule handler"},{name:"handleDelete",docblock:"Delete Rule handler\n@method handleDelete\n@returns {undefined}",modifiers:[],params:[{name:"ruleId",optional:!1}],returns:{},description:"Delete Rule handler"},{name:"handleSetFilters",docblock:"Set filter handler\n@method handleSetFilters\n@returns {undefined}",modifiers:[],params:[{name:"value",optional:!1}],returns:{},description:"Set filter handler"},{name:"handleEnableRule",docblock:"Enable rule handler\n@method handleEnableRule\n@returns {undefined}",modifiers:[],params:[{name:"rule",optional:!1}],returns:{},description:"Enable rule handler"}],displayName:"Rules",props:{getControlPanelRules:{description:"",type:{name:"func"},required:!0},deleteControlPanelRule:{description:"",type:{name:"func"},required:!0},getContentRulesEvents:{description:"",type:{name:"func"},required:!0},editRule:{description:"",type:{name:"func"},required:!0}}}},"./src/icons/down.svg":function(module){module.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 36 36"},content:'<path fill-rule="evenodd" d="M29.293 17.293 19 27.586 19 5 17 5 17 27.586 6.707 17.293 5.293 18.707 18 31.414 30.707 18.707z"/>'}},"./src/icons/up.svg":function(module){module.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",viewBox:"0 0 36 36"},content:'<path fill-rule="evenodd" d="M30.707 17.293 18 4.586 5.293 17.293 6.707 18.707 17 8.414 17 31 19 31 19 8.414 29.293 18.707z"/>'}}}]);